# 材质

在之前的章节中，我们提到 **BRDF** 和 **BTDF** 两种算法，他们用于解决如何描述，光如何在物体表面上的点进行散射。但是我们的渲染器，需要具体知道哪一个点，以及他们的参数。在这一章节中，我们会讲述如何实现这一点的机制。

pbrt 的基本思想是，将一个表面着色器，绑定到场景中的每一个基元中。一个表面着色器，他是一个材质接口类的实例，这个实例会有一个函数，传入一个表面上的点，并创建一个 **BSDF**（或者是 BSSRDF） 物体，用这个 Object 来描述该点的光的散射情况。

BSDF 会有一系列的 **BXDF**，将他们的贡献度相加，就是完整的散射函数。

材质，会使用 Texture 类的实例，来确定表面上某个特定点的材质属性。比如，一张 ImageTexture 图片，会用于漫反射的建模。在一般的做法中，会将 表面着色器，和光线积分器，整合到一个类中，然后返回一个特定点的光照颜色即可。但是 pbrt 使用分离这两个模块，Material 返回的是 BSDF，目的是更使用于各种光传输算法。

# BSDFs

BSDF 表示的是 BRDF 和 BTDF，在使用的时候，我们统一 BSDF 和系统交互，不需要区分是 R 还是 T。

还有一点，BSDF类，对其他的系统，隐藏了一些法线着色的细节。比如阴影法线，来自贴图，或者三角形网格中的顶点法线，把他们整合进基础着色器中是非常棘手的。这个问题，会在 BSDF 的实现中处理。



